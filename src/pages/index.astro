---
import {
  client,
  localized,
} from "../lib/microcms";
import type {
  SiteDataResponse,
  MenuItem,
} from "../lib/microcms";
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import NavPanel from "../components/NavPanel.astro";
import Hero from "../components/Hero.astro";
import Catchcopy from "../components/Catchcopy.astro";
import About from "../components/About.astro";
import Menu from "../components/Menu.astro";
import StoreInfo from "../components/StoreInfo.astro";
import Footer from "../components/Footer.astro";

const lang = "ja" as const;

const [siteData, recommended, collaboration] = await Promise.all([
  client.get<SiteDataResponse>({ endpoint: "site-data" }),
  client.getList<MenuItem>({
    endpoint: "menu-items",
    queries: { filters: "category[contains]recommended", orders: "sortOrder" },
  }),
  client.getList<MenuItem>({
    endpoint: "menu-items",
    queries: { filters: "category[contains]collaboration", orders: "sortOrder" },
  }),
]);
---

<Layout
  lang={lang}
  title={localized(siteData, "title", lang)}
  description={localized(siteData, "description", lang)}
  ogImage={siteData.ogImage?.url}
>
  <Header lang={lang} />
  <NavPanel lang={lang} snsLinks={siteData.snsLinks} />
  <main>
    <Hero lang={lang} slides={siteData.slides} />
    <Catchcopy
      lang={lang}
      mainCopy={localized(siteData, "mainCopy", lang)}
      subCopy={localized(siteData, "subCopy", lang)}
    />
    <About lang={lang} data={siteData} />
    <Menu
      lang={lang}
      recommended={recommended.contents}
      collaboration={collaboration.contents}
      otherMenuUrl="/menu-ja.pdf"
    />
    <StoreInfo lang={lang} data={siteData} />
  </main>
  <Footer lang={lang} storeInfo={siteData} footer={siteData} />
</Layout>
