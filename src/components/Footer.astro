---
import type { Lang, StoreInfoResponse, FooterResponse } from "../lib/microcms";
import { isSafeUrl } from "../lib/microcms";

interface Props {
  lang: Lang;
  storeInfo: StoreInfoResponse;
  footer: FooterResponse;
}

const { lang, storeInfo, footer } = Astro.props;
---

<footer class="footer" data-lang={lang}>
  <!-- ナビリンク -->
  <nav class="footer-nav">
    {lang === "ja" ? (
      <>
        <a href="#about">祇園だいきちについて</a>
        <a href="#menu">お品書き</a>
        <a href="#store-info">店舗情報</a>
      </>
    ) : (
      <>
        <a href="#about">About</a>
        <a href="#menu">Menu</a>
        <a href="#store-info">Store Information</a>
      </>
    )}
  </nav>

  <!-- ロゴ -->
  <div class="footer-logo">
    <img
      src="/images/logo-footer.webp"
      alt={lang === "ja" ? "祇園だいきち牧場 ロゴ" : "Gion Daikichi Ranch Logo"}
      width="160"
      height="160"
      loading="lazy"
      decoding="async"
    />
  </div>

  <!-- 住所・TEL -->
  <p class="footer-address">
    {lang === "ja"
      ? `〒${storeInfo.postalCode} ${storeInfo.address_ja}`
      : storeInfo.address_en}
  </p>
  <p class="footer-tel">TEL: {storeInfo.tel}</p>

  <!-- SNS リンク -->
  <div class="footer-sns">
    {footer.snsLinks.map((sns) =>
      isSafeUrl(sns.url) ? (
        <a href={sns.url} target="_blank" rel="noopener" aria-label={sns.platform[0]}>
          {sns.platform[0] === "instagram" && (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="2" width="20" height="20" rx="5" stroke="#585858" stroke-width="1.5" />
              <circle cx="12" cy="12" r="5" stroke="#585858" stroke-width="1.5" />
              <circle cx="17.5" cy="6.5" r="1" fill="#585858" />
            </svg>
          )}
          {sns.platform[0] === "tiktok" && (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16.6 5.82A4.28 4.28 0 0 1 15.54 3h-3.09v12.4a2.59 2.59 0 0 1-2.59 2.5c-1.42 0-2.6-1.16-2.6-2.6a2.6 2.6 0 0 1 2.6-2.6c.27 0 .53.04.78.12V9.57a5.74 5.74 0 0 0-.78-.05 5.76 5.76 0 0 0-5.76 5.76 5.76 5.76 0 0 0 5.76 5.76 5.76 5.76 0 0 0 5.76-5.76V9.36A7.35 7.35 0 0 0 20 10.64V7.5a4.28 4.28 0 0 1-3.4-1.68Z" fill="#585858" />
            </svg>
          )}
          {sns.platform[0] === "youtube" && (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 12a29 29 0 0 0 .46 5.58 2.78 2.78 0 0 0 1.94 2C5.12 20 12 20 12 20s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2A29 29 0 0 0 23 12a29 29 0 0 0-.46-5.58Z" fill="#585858" />
              <path d="m9.75 15.02 5.75-3.27-5.75-3.27v6.54Z" fill="#FFFFFF" />
            </svg>
          )}
        </a>
      ) : null
    )}
  </div>

  <!-- コピーライト -->
  <p class="footer-copyright">
    &copy; 2026 {lang === "ja" ? "祇園だいきち牧場" : "Gion Daikichi Ranch"} All Rights Reserved.
  </p>
</footer>

<style>
  .footer {
    background: #ffffff;
    color: #585858;
    border-top: 1px solid #e8e8e8;
    padding: 60px 80px 40px;
  }

  .footer-nav {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 40px;
  }

  .footer-nav a {
    font-size: 13px;
    letter-spacing: 0.08em;
    color: #585858;
    transition: opacity 0.3s;
  }

  .footer-nav a:hover {
    opacity: 0.7;
  }

  .footer-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
  }

  .footer-logo img {
    width: 160px;
    height: 160px;
  }

  .footer-address {
    font-size: 13px;
    text-align: center;
    letter-spacing: 0.08em;
    margin-bottom: 8px;
    color: #585858;
  }

  .footer-tel {
    font-size: 13px;
    text-align: center;
    letter-spacing: 0.08em;
    margin-bottom: 30px;
    color: #585858;
  }

  .footer-sns {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 40px;
  }

  .footer-sns a {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s;
  }

  .footer-sns a:hover {
    opacity: 0.7;
  }

  .footer-copyright {
    font-size: 12px;
    text-align: center;
    color: #767676;
  }

  /* EN specific */
  .footer[data-lang="en"] .footer-address,
  .footer[data-lang="en"] .footer-tel {
    letter-spacing: 0.05em;
  }

  /* SP */
  @media (max-width: 768px) {
    .footer {
      padding: 40px 20px 30px;
    }

    .footer-nav {
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .footer-logo img {
      width: 120px;
      height: 120px;
    }

    .footer-address {
      font-size: 12px;
    }

    .footer-tel {
      font-size: 12px;
    }
  }
</style>
